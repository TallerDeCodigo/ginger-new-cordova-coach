window.initializeEvents=function(){jQuery(document).ready(function(e){console.log("Initializing DocReady v0.1"),e("body").removeClass("preventEvents"),e(".hook").on("click",function(o){return o.preventDefault(),app.showLoader(),"home"==e(this).data("resource")?(app.showLoader(),app.render_home(e(this).attr("href"))):"chat-contacts"==e(this).data("resource")?(app.showLoader(),app.render_chat(e(this).attr("href"))):"user-list"==e(this).data("resource")?(app.showLoader(),app.render_user_list(e(this).attr("href"))):"diet-list"==e(this).data("resource")?(app.showLoader(),app.render_coach_dietas(e(this).attr("href"))):"finanzas"==e(this).data("resource")?(app.showLoader(),app.render_finances_view(e(this).attr("href"))):"profile"==e(this).data("resource")?(app.showLoader(),app.render_myProfile(e(this).attr("href"))):"create-diet"==e(this).data("resource")?app.render_create_diet(e(this).attr("href")):"duplicate-diet"==e(this).data("resource")?app.render_duplicate_diet(e(this).attr("href")):void o.stopPropagation()});var o=(document.documentElement.clientHeight,null);"undefined"!=typeof Keyboard&&(console.log("Keyboard not undefined"),Keyboard.shrinkView(!1),Keyboard.disableScrollingInShrinkView(!1)),e(".view").hasClass("has-chat-list")&&(console.log("Keyboard has-chat-list"),"undefined"!=typeof Keyboard&&(Keyboard.shrinkView(!0),Keyboard.disableScrollingInShrinkView(!0)));var a=function(){return console.log("Fixin keyboard"),e("body").addClass("openkeyboard"),e(".view").hasClass("has-chat-list")?(o=o?o:document.documentElement.clientHeight,console.log("calculate ::: "+o),void e("#container").animate({height:o+"px"},240,"swing",function(){e(".escribir").slideToggle("fast")})):void 0};if(window.openKeyboard=!1,window.addEventListener("keyboardDidShow",function(){return console.log("keyboardDidShow"),e(".escribir").hide(),window.openKeyboard=!0,a()}),window.addEventListener("keyboardDidHide",function(){console.log("keyboardDidHide"),window.openKeyboard=!1,e("body").removeClass("openkeyboard"),e("body").scrollTop(e("#messages-list").prop("scrollHeight")),e(".escribir").css("bottom",0)}),!chatCore.isInitialized&&loggedIn&&chatCore.init(_coach),e("#login_form").length&&e("#login_form").validate({rules:{mail:{required:!0,email:!0},pass:"required"},messages:{mail:{required:"Debes proporcionar un correo",email:"Proporciona un correo válido"},pass:"Este campo es requerido para acceder a tu cuenta"},submitHandler:function(e,o){o.preventDefault();var a=app.getFormData(e),t=apiRH.loginNative(a);if(t){apiRH.headers["X-ZUMO-AUTH"]=t;var i=apiRH.getInfoCoach();if(i){var i=JSON.parse(localStorage.getItem("user"));return window._coach=i?i:null,app.render_home()}}else app.toast("Ocurrió un error, por favor revisa que tus datos sean correctos.")}}),e(".view").hasClass("finanzas")&&(window.adjustFinanzas=function(){var o=(catalogues.months,new Date),a=o.getMonth(),t=window.temp_month?temp_month:o.getMonth();e(".btn_right").removeClass("inactive"),t==a&&e(".btn_right").addClass("inactive"),e(".btn-gre").click(function(){console.log("Clicked upload receipt"),app.get_file_from_device("receipt","gallery")}),e(".btn_right").click(function(){return t++,t=t>11?0:t,window.temp_month=t,console.log(t),t==a&&e(this).addClass("inactive"),app.renderFinancesContent(null,t)}),e(".btn_left").click(function(){return t--,t=0>t?11:t,window.temp_month=t,console.log(t),t!=a&&e(".btn_right").removeClass("inactive"),app.renderFinancesContent(null,t)}),app.hideLoader()},adjustFinanzas()),e(".view").hasClass("list-usuarios")){app.showLoader();var t=[];if(t.users=apiRH.getUsuarios(),console.log(t),"undefined"!=typeof t.users)return app.render_template("user-list-content",".insert_content",t),e(".notificaciones").on("click",function(){app.render_comingSoon("proximamente.html")}),chatCore.fetchUnreadCount(_coach)}if(e(".view").hasClass("dialog_detail")&&e(".view").hasClass("dialogLoad")&&(console.log("Trigger load chat content"),dialogNow||console.log("Too bad for you"),triggerDialog(dialogNow)),e(".view").hasClass("coach-profile")&&(e("#logout").on("click",function(o){e(".overscreen2").is(":visible")||(e(".overscreen2").addClass("active"),e(".overscreen2").show(),e("#blur").toggleClass("blurred"))}),e("#accept.logout").click(function(){return app.keeper.clear(),app.toast("Sesión cerrada ¡hasta pronto!"),e("#blur").toggleClass("blurred"),app.render_login()}),e(".cancel").click(function(){e(".overscreen2").hide(),e("#blur").toggleClass("blurred")}),app.hideLoader()),e(".view").hasClass("has-chat-list")){var i=JSON.parse(localStorage.getItem("user")),r={login:i.mail,pass:i.chatPassword};connectToChat(r);var n=apiRH.getUsuarios();console.log(JSON.stringify(n));var s=n,l=0;e.each(s,function(o,a){console.log(l+" - "+a),e("#contacts-list").append("<a class='btnDialogs' data='"+JSON.stringify(s[l].jid)+"'><li class='persona' ><div class='circle-frame'><img src='images/Icon-60@3x.png'></div><h5 style='margin-top:10px'>"+s[l].nombre+" "+s[l].apellido+"</h5></li>"),l++}),e(".btnDialogs").click(function(){console.log(e(this).attr("data")),localStorage.setItem("idQBOX",e(this).attr("data")),e(this).attr("data")==e(".los_chats:nth-of-type(1)").attr("data")?console.log("ya existe"):createNewDialog()}),e(".attach").click(function(){e('input[name="galeria"]').trigger("click")}),e(".list-group-item").click(function(){e("#dialog-list").hide(),e(".menu-bar").hide(),e(".escribir").show()}),e(".back").click(function(){if(e("#messages-list").is(":visible")){console.log("lista_chat visible");var o=new CustomEvent("keyboardDidHide",{detail:"Forced hide keyboard event"});document.dispatchEvent(o),e(".escribir").hide(),e("#dialogs-list").show(),e("#messages-list").hide(),e(".menu-bar").show()}else e(".lista_chat").is(":visible")&&app.render_home()}),e("#btn_contacts").click(function(){e("#dialogs-list").hide(),e("#contacts-list").show()}),e("#btn_chats").click(function(){e("#dialogs-list").show(),e("#contacts-list").hide()}),e("#mensaje-chat").focus(function(){"Mensaje"==this.innerHTML&&(this.innerHTML="")}),app.hideLoader()}if(e(".view").hasClass("diet-list")){var n=[];n.diets=apiRH.getDiets();var l=0;app.render_template("diet-list-content",".insert_content",n);var c=n;e.each(c,function(o,a){var t="no-name",i="",r="";e.each(a,function(e,o){"nombre"==e&&(t=o),"_id"==e&&(r=o),"descripcion"==e&&(i=o)}),l++}),e(".btn_copy").click(function(o){console.log("copy");var a=e(this).attr("data");localStorage.setItem("dOperator",a)}),e(".btn_edit").click(function(){var o=e(this).attr("data");console.log("ID DIET: "+o),localStorage.setItem("dOperator",o)});var d;e(".btn_delete").click(function(){console.log("borrar"),d=e(this).attr("data"),e(".overscreen4").is(":visible")?(e(".overscreen4").removeClass("active"),setTimeout(function(){e(".overscreen4").hide()},800)):(console.log("entra popup"),e(".overscreen4").show(),setTimeout(function(){e(".overscreen4").addClass("active")},200)),e("#blur").toggleClass("blurred")}),e("#aceptar").click(function(){console.log("aceptar borrar");var o=apiRH.deleteDiet(d);console.log(o),console.log(d),o&&(console.log("DELETE OK: "+o),e("li.each_diet_element[data="+d+"]").remove()),e(".overscreen4").hide(),e("#blur").toggleClass("blurred")}),e("#cancelar").click(function(){console.log("cancelado"),e(".overscreen4").hide(),e("#blur").toggleClass("blurred")})}e(".view").hasClass("create-new-diet")&&e(".btn-gre").click(function(){app.showLoader(),console.log("CREAR DIETA");var o=e('input[name="nombre"]').val(),a=e('input[name="cometario"]').val();localStorage.setItem("d_nombre",o),localStorage.setItem("d_comentario",a),o=localStorage.getItem("d_nombre"),a=localStorage.getItem("d_comentario"),console.log(o),console.log(a),o.length<4||a.length<4||window.location.assign("dieta.html?method=create")})})};